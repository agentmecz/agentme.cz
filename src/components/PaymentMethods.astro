---
import SectionWrapper from './ui/SectionWrapper.astro';
import FadeIn from './ui/FadeIn.astro';
import { paymentMethods } from '../data/content';
---

<SectionWrapper id="payments">
  <FadeIn>
    <h2 class="mb-4 text-center text-3xl font-bold tracking-tight md:text-4xl lg:text-5xl">
      {paymentMethods.headline}
    </h2>
    <p class="mb-16 text-center text-text-secondary max-w-2xl mx-auto">
      {paymentMethods.description}
    </p>
  </FadeIn>

  <!-- Payment methods -->
  <div class="grid gap-6 md:grid-cols-3 mb-12">
    {paymentMethods.methods.map((method, i) => (
      <FadeIn delay={i * 100}>
        <div class="rounded-xl border border-border bg-bg-card/30 p-6 transition-all duration-300 hover:border-border-glow">
          <h3 class="mb-1 text-lg font-semibold">{method.name}</h3>
          <div class="mb-3 flex items-center gap-2">
            <span class="rounded-md bg-accent-cyan/10 px-2 py-0.5 text-xs font-medium text-accent-cyan">{method.trust}</span>
            <span class="text-xs text-text-muted">·</span>
            <span class="font-mono text-xs text-text-muted">{method.fee}</span>
          </div>
          <p class="text-sm text-text-secondary">{method.useCase}</p>
        </div>
      </FadeIn>
    ))}
  </div>

  <!-- Dynamic escrow table -->
  <FadeIn delay={300}>
    <div class="mx-auto max-w-xl rounded-xl border border-border bg-bg-card/30 overflow-hidden">
      <div class="border-b border-border px-6 py-3">
        <h3 class="text-sm font-semibold text-text-secondary">Dynamic escrow — scales with trust</h3>
      </div>
      <table class="w-full text-sm">
        <thead>
          <tr class="border-b border-border text-text-muted">
            <th class="px-6 py-3 text-left font-medium">Trust Score</th>
            <th class="px-6 py-3 text-left font-medium">Escrow Required</th>
            <th class="px-6 py-3 text-left font-medium hidden sm:table-cell">Result</th>
          </tr>
        </thead>
        <tbody>
          {paymentMethods.escrowTable.map((row) => (
            <tr class="border-b border-border/50 last:border-0">
              <td class="px-6 py-3 font-mono text-accent-cyan">{row.score}</td>
              <td class="px-6 py-3 font-semibold">{row.escrow}</td>
              <td class="px-6 py-3 text-text-muted hidden sm:table-cell">{row.label}</td>
            </tr>
          ))}
        </tbody>
      </table>
    </div>
  </FadeIn>
</SectionWrapper>
